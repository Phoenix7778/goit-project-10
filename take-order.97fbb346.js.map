{"mappings":"AAWA,IAAMA,eAAiBC,SAASC,uBAAuB,oBAAoB,GACrEC,eAAiBF,SAASC,uBAAuB,oBAAoB,GACrEE,kBAAoBD,eAAeE,SAAS,GAC5CC,mBAAqBH,eAAeE,SAAS,GAC7CE,eAAiBC,MAAMC,KAAKH,mBAAmBD,UAC/CK,aAAeH,eAAeI,OAC9BC,aAAeR,kBAAkBS,aAAa,cAEhDC,cAAgB,GAChBC,oBAAqB,EAazB,SAASC,oBACPb,eAAec,UAAUC,IAAI,aAG7Bf,eAAegB,aAAa,eAAe,GAEvCL,gBAIFM,0BAH2Bb,eAAec,WACxC,SAAAC,G,OAAMA,EAAGT,aAAa,gBAAkBC,a,KAM5Cb,SAASsB,iBAAiB,QAASC,mBACnCvB,SAASsB,iBAAiB,UAAWE,0B,CAGvC,SAASC,oBACPvB,eAAec,UAAUU,OAAO,aAEhCxB,eAAegB,aAAa,eAAe,GAE3CC,2BAA0B,GAG1BnB,SAAS2B,oBAAoB,QAASJ,mBACtCvB,SAAS2B,oBAAoB,UAAWH,0B,CAG1C,SAASL,0BAA0BS,GACjC,IAAMC,EAAaxB,mBAAmBD,SAASU,oBACzCgB,EAASzB,mBAAmBD,SAASwB,GAEvCC,GACFA,EAAWb,UAAUU,OAAO,WAE1BI,GACFA,EAAOd,UAAUC,IAAI,WAGvBH,mBAAqBc,C,CAGvB,SAASG,0BAA0BC,EAAOC,GACxC,IAAMC,EAAYrB,cAEZsB,EAAe9B,mBAAmB+B,cACtC,gBAA0BC,OAAVH,EAAU,MAEtBI,EAAWjC,mBAAmB+B,cAAc,gBAAsBC,OAANL,EAAM,MAEpEG,GACFA,EAAanB,UAAUU,OAAO,aAG5BY,GACFA,EAAStB,UAAUC,IAAI,aAGzBd,kBAAkBoC,YAAcN,EAChCpB,cAAgBmB,C,CAGlB,SAAST,kBAAkBiB,IACEtC,eAAeuC,SAASC,MAAMC,SAEvDlB,mB,CAIJ,SAASD,0BAA0BgB,GAEjC,GAAsB,KAAlBE,MAAME,SAAkB9B,mBAAqBL,aAAe,EAAG,CAEjE+B,EAAEK,iBACF1B,0BAA0BL,mBAAqB,E,CAUjD,GANsB,KAAlB4B,MAAME,SAAkB9B,mBAAqB,IAC/C0B,EAAEK,iBACF1B,0BAA0BL,mBAAqB,IAI3B,KAAlB4B,MAAME,SAAoC,KAAlBF,MAAME,QAAgB,CAChDJ,EAAEK,iBAEF,IAAMf,EAASzB,mBAAmBD,SAASU,oBACrCkB,EAAQF,GAAUA,EAAOlB,aAAa,cAExCoB,IACFjC,eAAeiC,MAAQA,EACvBD,0BAA0BC,EAAOF,EAAOS,cAE1Cd,mB,CAIoB,KAAlBiB,MAAME,SACRnB,mB,CA/GJtB,kBAAkBmB,iBAAiB,SAAS,SAAAkB,IACvBtC,eAAec,UAAUyB,SAAS,aAGnD1B,mBAEAU,mB,IA8GJ1B,eAAeuB,iBAAiB,UAAU,SAAAkB,GACxC,IAAMR,EAAQQ,EAAEG,OAAOX,MAKvBD,0BAA0BC,EAJO3B,mBAAmByC,iBAClD,gBAAsBT,OAANL,EAAM,OACtB,GAEwDO,Y,IAI5DjC,eAAeyC,SAAQ,SAAUT,EAAUU,GACzCV,EAAShB,iBAAiB,SAAS,SAAAkB,GACjC,IAAMR,EAAQQ,EAAEG,OAAO/B,aAAa,cAGpCb,eAAeiC,MAAQA,EACvBD,0BAA0BC,EAAOQ,EAAEG,OAAOJ,aAC1Cd,mB,IAGFa,EAAShB,iBAAiB,cAAc,SAAAkB,GACtCrB,0BAA0B6B,E","sources":["src/js/select-q.js"],"sourcesContent":["/* Features to make the selectCustomQ work for mouse users.\n\n- Toggle custom select visibility when clicking the \"box\"\n- Update custom select value when clicking in a option\n- Navigate through options when using keyboard up/down\n- Pressing Enter or Space selects the current hovered option\n- Close the select when clicking outside of it\n- Sync both selects values when selecting a option. (native or custom)\n\n*/\n\nconst elselectNative = document.getElementsByClassName('js-selectNativeQ')[0];\nconst elselectCustom = document.getElementsByClassName('js-selectCustomQ')[0];\nconst elselectCustomBox = elselectCustom.children[0];\nconst elselectCustomOpts = elselectCustom.children[1];\nconst customOptsList = Array.from(elselectCustomOpts.children);\nconst optionsCount = customOptsList.length;\nconst defaultLabel = elselectCustomBox.getAttribute('data-value');\n\nlet optionChecked = '';\nlet optionHoveredIndex = -1;\n\n// Toggle custom select visibility when clicking the box\nelselectCustomBox.addEventListener('click', e => {\n  const isClosedQ = !elselectCustom.classList.contains('isActiveQ');\n\n  if (isClosedQ) {\n    openselectCustom();\n  } else {\n    closeselectCustom();\n  }\n});\n\nfunction openselectCustom() {\n  elselectCustom.classList.add('isActiveQ');\n  // Remove aria-hidden in case this was opened by a user\n  // who uses AT (e.g. Screen Reader) and a mouse at the same time.\n  elselectCustom.setAttribute('aria-hidden', false);\n\n  if (optionChecked) {\n    const optionCheckedIndex = customOptsList.findIndex(\n      el => el.getAttribute('data-value') === optionChecked\n    );\n    updateCustomSelectHovered(optionCheckedIndex);\n  }\n\n  // Add related event listeners\n  document.addEventListener('click', watchClickOutside);\n  document.addEventListener('keydown', supportKeyboardNavigation);\n}\n\nfunction closeselectCustom() {\n  elselectCustom.classList.remove('isActiveQ');\n\n  elselectCustom.setAttribute('aria-hidden', true);\n\n  updateCustomSelectHovered(-1);\n\n  // Remove related event listeners\n  document.removeEventListener('click', watchClickOutside);\n  document.removeEventListener('keydown', supportKeyboardNavigation);\n}\n\nfunction updateCustomSelectHovered(newIndex) {\n  const prevOption = elselectCustomOpts.children[optionHoveredIndex];\n  const option = elselectCustomOpts.children[newIndex];\n\n  if (prevOption) {\n    prevOption.classList.remove('isHover');\n  }\n  if (option) {\n    option.classList.add('isHover');\n  }\n\n  optionHoveredIndex = newIndex;\n}\n\nfunction updateCustomSelectChecked(value, text) {\n  const prevValue = optionChecked;\n\n  const elPrevOption = elselectCustomOpts.querySelector(\n    `[data-value=\"${prevValue}\"`\n  );\n  const elOption = elselectCustomOpts.querySelector(`[data-value=\"${value}\"`);\n\n  if (elPrevOption) {\n    elPrevOption.classList.remove('isActiveQ');\n  }\n\n  if (elOption) {\n    elOption.classList.add('isActiveQ');\n  }\n\n  elselectCustomBox.textContent = text;\n  optionChecked = value;\n}\n\nfunction watchClickOutside(e) {\n  const didClickedOutside = !elselectCustom.contains(event.target);\n  if (didClickedOutside) {\n    closeselectCustom();\n  }\n}\n\nfunction supportKeyboardNavigation(e) {\n  // press down -> go next\n  if (event.keyCode === 40 && optionHoveredIndex < optionsCount - 1) {\n    let index = optionHoveredIndex;\n    e.preventDefault(); // prevent page scrolling\n    updateCustomSelectHovered(optionHoveredIndex + 1);\n  }\n\n  // press up -> go previous\n  if (event.keyCode === 38 && optionHoveredIndex > 0) {\n    e.preventDefault(); // prevent page scrolling\n    updateCustomSelectHovered(optionHoveredIndex - 1);\n  }\n\n  // press Enter or space -> select the option\n  if (event.keyCode === 13 || event.keyCode === 32) {\n    e.preventDefault();\n\n    const option = elselectCustomOpts.children[optionHoveredIndex];\n    const value = option && option.getAttribute('data-value');\n\n    if (value) {\n      elselectNative.value = value;\n      updateCustomSelectChecked(value, option.textContent);\n    }\n    closeselectCustom();\n  }\n\n  // press ESC -> close selectCustom\n  if (event.keyCode === 27) {\n    closeselectCustom();\n  }\n}\n\n// Update selectCustom value when selectNative is changed.\nelselectNative.addEventListener('change', e => {\n  const value = e.target.value;\n  const elRespectiveCustomOption = elselectCustomOpts.querySelectorAll(\n    `[data-value=\"${value}\"]`\n  )[0];\n\n  updateCustomSelectChecked(value, elRespectiveCustomOption.textContent);\n});\n\n// Update selectCustom value when an option is clicked or hovered\ncustomOptsList.forEach(function (elOption, index) {\n  elOption.addEventListener('click', e => {\n    const value = e.target.getAttribute('data-value');\n\n    // Sync native select to have the same value\n    elselectNative.value = value;\n    updateCustomSelectChecked(value, e.target.textContent);\n    closeselectCustom();\n  });\n\n  elOption.addEventListener('mouseenter', e => {\n    updateCustomSelectHovered(index);\n  });\n\n  // TODO: Toggle these event listeners based on selectCustom visibility\n});\n"],"names":["elselectNative","document","getElementsByClassName","elselectCustom","elselectCustomBox","children","elselectCustomOpts","customOptsList","Array","from","optionsCount","length","defaultLabel","getAttribute","optionChecked","optionHoveredIndex","openselectCustom","classList","add","setAttribute","updateCustomSelectHovered","findIndex","el","addEventListener","watchClickOutside","supportKeyboardNavigation","closeselectCustom","remove","removeEventListener","newIndex","prevOption","option","updateCustomSelectChecked","value","text","prevValue","elPrevOption","querySelector","concat","elOption","textContent","e","contains","event","target","keyCode","preventDefault","querySelectorAll","forEach","index"],"version":3,"file":"take-order.97fbb346.js.map"}